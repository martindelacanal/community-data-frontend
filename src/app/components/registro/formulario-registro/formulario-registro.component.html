<div class="cuerpo">
  <header>
    <!-- <img src="../../../../assets/imgs/login/community_logo.png" alt="Logo principal" class="logo"> -->
    <span>Community Data</span>
    <span class="form-inline">
      <select class="ui-input" id="languageSelector" #selectedLang (change)="switchLang(selectedLang.value)">
        <option *ngFor="let language of translate.getLangs()" [value]="language" [selected]="language === translate.currentLang">
          {{ translate.instant('language_' + language) }}
        </option>
      </select>
    </span>
  </header>
  <main>
    <div class="container">
      <section>
        <div class="ui-tarjeta">
          <h1>{{'register_title' | translate }}</h1>
          <mat-stepper [linear]="isLinear" #stepper>
            <mat-step [stepControl]="firstFormGroup">
              <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>{{'register_first_tab_title' | translate }}</ng-template>
                <div class="tarjeta__input">
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_user_name' | translate }}</mat-label>
                    <input matInput formControlName="username" type="username" required>
                    <mat-error *ngIf="firstFormGroup.controls['username'].hasError('invalidUsername')">
                      {{'register_first_tab_input_user_name_error_exists' | translate }}
                    </mat-error>
                    <mat-error *ngIf="firstFormGroup.controls['username'].hasError('required')">
                      {{'register_first_tab_input_user_name_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_password' | translate }}</mat-label>
                    <input matInput formControlName="password" type="password" required>
                    <mat-error *ngIf="firstFormGroup.controls['password'].hasError('required')">
                      {{'register_first_tab_input_password_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_first_name' | translate }}</mat-label>
                    <input matInput formControlName="firstName" required>
                    <mat-error *ngIf="firstFormGroup.controls['firstName'].hasError('required')">
                      {{'register_first_tab_input_first_name_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_last_name' | translate }}</mat-label>
                    <input matInput formControlName="lastName" required>
                    <mat-error *ngIf="firstFormGroup.controls['lastName'].hasError('required')">
                      {{'register_first_tab_input_last_name_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="full-width">
                    <mat-label>{{'login_recover_password_input_date_of_birth' | translate }}</mat-label>
                    <input matInput [matDatepicker]="miPicker1" formControlName="dateOfBirth">
                    <mat-hint>{{'login_recover_password_input_date_of_birth_format' | translate }}</mat-hint>
                    <mat-datepicker-toggle matSuffix [for]="miPicker1"></mat-datepicker-toggle>
                    <mat-datepicker #miPicker1></mat-datepicker>
                    <mat-error *ngIf="firstFormGroup.controls['dateOfBirth'].hasError('required')">
                      {{'login_recover_password_input_date_of_birth_error_please' | translate }}
                    </mat-error>
                    <mat-error *ngIf="firstFormGroup.controls['dateOfBirth'].hasError('invalidAge')">
                      {{'login_recover_password_input_date_of_birth_error_age' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_email_address' | translate }}</mat-label>
                    <input matInput formControlName="email" type="email">
                    <mat-error *ngIf="firstFormGroup.controls['email'].hasError('invalidEmail')">
                      {{'register_first_tab_input_email_address_error_exists' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_phone' | translate }}</mat-label>
                    <input matInput type="number" formControlName="phone" required matNumberInput>
                    <mat-error *ngIf="firstFormGroup.controls['phone'].hasError('required')">
                      {{'register_first_tab_input_phone_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_zip_code' | translate }}</mat-label>
                    <input matInput type="number" formControlName="zipcode" required matNumberInput>
                    <mat-error *ngIf="firstFormGroup.controls['zipcode'].hasError('required')">
                      {{'register_first_tab_input_zip_code_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <mat-form-field appearance="outline">
                    <mat-label>{{'register_first_tab_input_household_size' | translate }}</mat-label>
                    <input matInput type="number" formControlName="householdSize" required matNumberInput>
                    <mat-error *ngIf="firstFormGroup.controls['householdSize'].hasError('required')">
                      {{'register_first_tab_input_household_size_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                  <label class="radio-button-label" id="radio-button-group-label">{{'register_first_tab_input_gender' | translate }} <span
                      [ngClass]="{'required': firstFormGroup.controls['gender'].invalid}">*</span></label>
                  <mat-radio-group aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="gender">
                    <mat-radio-button class="radio-button" *ngFor="let gender of genders" [value]="gender.id">
                      {{gender.name}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <label class="radio-button-label" id="radio-button-group-label">{{'register_first_tab_input_ethnicity' | translate }} <span
                      [ngClass]="{'required': firstFormGroup.controls['ethnicity'].invalid}">*</span></label>
                  <mat-radio-group aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="ethnicity">
                    <mat-radio-button class="radio-button" *ngFor="let ethnicity of ethnicities" [value]="ethnicity.id">
                      {{ethnicity.name}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <mat-form-field appearance="outline" *ngIf="otroEthnicity && otroEthnicity.id === firstFormGroup.get('ethnicity').value">
                    <mat-label>{{'register_first_tab_input_others' | translate }}</mat-label>
                    <input matInput formControlName="otherEthnicity" required>
                    <mat-error *ngIf="firstFormGroup.controls['otherEthnicity'].hasError('required')">
                      {{'register_first_tab_input_others_error_please' | translate }}
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="botones-stepper">
                  <button class="ui-button next" matStepperNext [disabled]="!firstFormGroup.valid">{{'register_first_tab_button_next' | translate }}</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="secondFormGroup">
              <form [formGroup]="secondFormGroup">
                <ng-template matStepLabel>{{'register_second_tab_title' | translate }}</ng-template>
                <div class="tarjeta__input">
                  <label class="radio-button-label" id="radio-button-group-label">Health Insurance? <span
                      [ngClass]="{'required': secondFormGroup.controls['input1'].invalid}">*</span></label>
                  <mat-radio-group aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="input1">
                    <mat-radio-button class="radio-button" *ngFor="let input1 of input1s" [value]="input1">
                      {{input1}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <label *ngIf="secondFormGroup.get('input1').value === 'Yes'" class="radio-button-label" id="radio-button-group-label">MediCal/Covered California? <span
                      [ngClass]="{'required': secondFormGroup.controls['input2'].invalid}">*</span></label>
                  <mat-radio-group *ngIf="secondFormGroup.get('input1').value === 'Yes'" aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="input2">
                    <mat-radio-button class="radio-button" *ngFor="let input2 of input2s" [value]="input2">
                      {{input2}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <label *ngIf="secondFormGroup.get('input1').value === 'Yes'" class="radio-button-label" id="radio-button-group-label">Which health plan? <span
                      [ngClass]="{'required': secondFormGroup.controls['input3'].invalid}">*</span></label>
                  <mat-radio-group *ngIf="secondFormGroup.get('input1').value === 'Yes'" aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="input3">
                    <mat-radio-button class="radio-button" *ngFor="let input3 of input3s" [value]="input3">
                      {{input3}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <label class="radio-button-label" id="radio-button-group-label">Need assistance with Health Services?
                    <span [ngClass]="{'required': secondFormGroup.controls['input4'].invalid}">*</span></label>
                  <mat-radio-group aria-labelledby="radio-button-group-label" class="radio-button-group"
                    formControlName="input4">
                    <mat-radio-button class="radio-button" *ngFor="let input4 of input4s" [value]="input4">
                      {{input4}}
                    </mat-radio-button>
                  </mat-radio-group>
                  <label *ngIf="secondFormGroup.get('input4').value === 'Yes'"class="radio-button-label" id="radio-button-group-label">Please select which ones <span
                      [ngClass]="{'required': secondFormGroupInput8.status === 'INVALID'}">*</span></label>
                  <div *ngIf="secondFormGroup.get('input4').value === 'Yes'" class="checkbox-options" formArrayName="input8">
                    <mat-checkbox aria-labelledby="radio-button-group-label" class="checkbox-option"
                      *ngFor="let input8 of input8s; let i = index" [value]="input8"
                      (change)="onCheckboxChange8($event, i)">{{input8}}</mat-checkbox>
                  </div>
                  <mat-form-field *ngIf="secondFormGroup.get('input8').value && secondFormGroup.get('input8').value.includes('Others')" appearance="outline">
                    <mat-label>If your answer is Others, please describe the service</mat-label>
                    <input matInput formControlName="input5" required>
                  </mat-form-field>
                  <label class="radio-button-label" id="radio-button-group-label">Need assistance with other social
                    services? <span
                      [ngClass]="{'required': secondFormGroupInput6.status === 'INVALID'}">*</span></label>
                  <div class="checkbox-options" formArrayName="input6">
                    <mat-checkbox aria-labelledby="radio-button-group-label" class="checkbox-option"
                      *ngFor="let input6 of input6s; let i = index" [value]="input6"
                      (change)="onCheckboxChange($event, i)">{{input6}}</mat-checkbox>
                  </div>
                  <mat-form-field *ngIf="secondFormGroup.get('input6').value && secondFormGroup.get('input6').value.includes('Others')" appearance="outline">
                    <mat-label>If your answer is Others, please describe the service</mat-label>
                    <input matInput formControlName="input7" required>
                  </mat-form-field>
                </div>
                <div class="botones-stepper">
                  <button class="ui-button back" matStepperPrevious>Back</button>
                  <button class="ui-button next" type="submit" (click)="onSubmit()" [disabled]="!combinedFormGroup.valid">Submit</button>
                </div>
              </form>
            </mat-step>
          </mat-stepper>
          <div class="ui-separator-horizontal"></div>
          <a class="ui-link" (click)="setForgetPassword(false,true)">{{'register_link_already_account' | translate }}</a>
        </div>
      </section>
    </div>
  </main>
</div>
